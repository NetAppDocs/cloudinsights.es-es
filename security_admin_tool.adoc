---
sidebar: sidebar 
permalink: security_admin_tool.html 
summary: Cloud Insights sigue las prácticas recomendadas de seguridad a lo largo del ciclo de vida de la versión. 
keywords: security, risk, protection 
---
= Herramienta securityadmin
:allow-uri-read: 


[role="lead"]
Cloud Insights incluye funciones de seguridad que permiten que su entorno funcione con una seguridad mejorada. Las características incluyen mejoras en el cifrado, hash de contraseñas y la capacidad de cambiar contraseñas de usuario internas, así como pares de claves que cifran y descifran contraseñas.

Para proteger los datos confidenciales, NetApp recomienda cambiar las claves predeterminadas y la contraseña de usuario _Acquisition_ después de realizar una instalación o actualización.

Las contraseñas cifradas del origen de datos se almacenan en Cloud Insights, que utiliza una clave pública para cifrar contraseñas cuando un usuario las introduce en una página de configuración del recopilador de datos. Cloud Insights no tiene las claves privadas necesarias para descifrar las contraseñas del recopilador de datos; solo las Unidades de Adquisición (AUS) tienen la clave privada del recopilador de datos necesaria para descifrar las contraseñas del recopilador de datos.



== Consideraciones sobre la actualización y la instalación

Cuando el sistema Insight contiene configuraciones de seguridad no predeterminadas (es decir, contraseñas recodificadas), debe realizar una copia de seguridad de sus configuraciones de seguridad. La instalación de software nuevo o, en algunos casos, la actualización de software, revierte el sistema a una configuración de seguridad predeterminada. Cuando el sistema vuelve a la configuración predeterminada, debe restaurar la configuración no predeterminada para que el sistema funcione correctamente.



== Gestión de la seguridad en la unidad de adquisición

La herramienta SecurityAdmin le permite administrar opciones de seguridad para Cloud Insights y se ejecuta en el sistema de unidades de adquisición. La gestión de seguridad incluye la gestión de claves y contraseñas, el guardado y la restauración de configuraciones de seguridad que se crean o restauran con la configuración predeterminada.



== Antes de empezar

* Debe tener privilegios de administrador en el sistema AU para instalar el software de la unidad de adquisición (que incluye la herramienta SecurityAdmin).
* Si tiene usuarios que no son administradores y que posteriormente necesitarán acceder a la herramienta SecurityAdmin, deben agregarse al grupo _cisys_. El grupo _cisys_ se crea durante la instalación de AU.


Después de la instalación de AU, la herramienta SecurityAdmin se encuentra en el sistema de unidades de adquisición en cualquiera de estas ubicaciones:

....
Windows - C:\Program Files\SANscreen\securityadmin\bin\securityadmin.bat
Linux - /bin/oci-securityadmin.sh
....


== Con la herramienta SecurityAdmin

Inicie la herramienta SecurityAdmin en modo interactivo (-i).


NOTE: Se recomienda utilizar la herramienta SecurityAdmin en modo interactivo, para evitar pasar secretos en la línea de comandos, que se pueden capturar en los registros.

Se muestran las siguientes opciones:

image:SecurityAdminMenuChoices.png["Opciones para SecurityAdmin Tool (Linux)"]

. *Backup*
+
Crea un archivo zip de copia de seguridad del almacén que contiene todas las contraseñas y claves y coloca el archivo en una ubicación especificada por el usuario o en las siguientes ubicaciones predeterminadas:

+
....
Windows - C:\Program Files\SANscreen\backup\vault
Linux - /var/log/netapp/oci/backup/vault
....
+
Se recomienda que las copias de seguridad de vault se mantengan seguras, ya que incluyen información confidencial.

. *Restaurar*
+
Restaura la copia de seguridad zip del almacén que se creó. Una vez restaurada, todas las contraseñas y claves se revierten a valores existentes en el momento de la creación del backup.

+
La restauración se puede utilizar para sincronizar contraseñas y claves en varios servidores, por ejemplo, siguiendo estos pasos: 1) Cambiar las claves de cifrado en la AU. 2) Crear una copia de seguridad del almacén. 3) Restaurar la copia de seguridad del almacén en cada uno de los AUS.

. *Registrar / Actualizar Script de Recuperación de Clave Externa*
+
Utilice un script externo para registrar o cambiar las claves de cifrado AU utilizadas para cifrar o descifrar las contraseñas del dispositivo.

+
Al cambiar las claves de cifrado, debe realizar un backup de la nueva configuración de seguridad para poder restaurarla después de una actualización o instalación.

+
Nota Esta opción solo está disponible en Linux.

+
Cuando utilice su propio script de recuperación de claves con la herramienta SecurityAdmin, tenga en cuenta lo siguiente:

+
** El algoritmo soportado actual es RSA con un mínimo de 2048 bits.
** El script debe devolver las claves privadas y públicas en texto sin formato. El script no debe devolver claves públicas y privadas cifradas.
** El script debe devolver contenido sin procesar y codificado (solo en formato PEM).
** El script externo debe tener permisos _execute_.


. * Girar claves de cifrado*
+
Gire sus claves de cifrado (anula el registro de las claves actuales y registra las nuevas claves). Para usar una clave desde un sistema de gestión de claves externa, se deben especificar el identificador de clave pública y el identificador de clave privada.



. *Restablecer a las teclas predeterminadas*
+
Restablece la contraseña de usuario de adquisición y las claves de cifrado de usuario de adquisición a los valores predeterminados, los valores predeterminados son los que se proporcionan durante la instalación.

. *Cambiar contraseña de Truststore*
+
Cambie la contraseña del almacén de confianza.

. *Cambiar Contraseña de Almacén de Claves*
+
Cambie la contraseña del almacén de claves.

. * Cifrar contraseña de recopilador*
+
Cifrar contraseña del recopilador de datos.

. *Salida*
+
Salga de la herramienta SecurityAdmin.



Elija la opción que desea configurar y siga las indicaciones.



== Especificación de un usuario para ejecutar la herramienta

Si se encuentra en un entorno controlado y consciente de la seguridad, es posible que no tenga el grupo _cisys_, pero aún así desee que usuarios específicos ejecuten la herramienta SecurityAdmin.

Puede lograr esto instalando manualmente el software AU y especificando el usuario/grupo al que desea acceder.

* Con la API, descargue el instalador de CI en el sistema AU y descomprima.
+
** Necesitará un token de autorización única. Consulte la documentación de API Swagger (_Admin > API Access_ y seleccione el enlace _API Documentation_) y busque la sección _GET /au/oneTimeToken_ API.
** Una vez que tenga el token, utilice la API _GET /au/installers/{platform}/{version}_ para descargar el archivo del instalador. Deberá proporcionar la plataforma (Linux o Windows), así como la versión del instalador.


* Copie el archivo de instalación descargado en el sistema AU y descomprima el archivo.
* Navegue a la carpeta que contiene los archivos y ejecute el instalador como root, especificando el usuario y el grupo:
+
 ./cloudinsights-install.sh <User> <Group>


Si el usuario y/o grupo especificados no existen, se crearán. El usuario tendrá acceso a la herramienta SecurityAdmin.



== Actualizando o eliminando proxy

La herramienta SecurityAdmin se puede utilizar para establecer o eliminar información de proxy para la unidad de adquisición ejecutando la herramienta con el parámetro _-pr_:

[listing]
----
[root@ci-eng-linau bin]# ./securityadmin -pr
usage: securityadmin -pr -ap <arg> | -h | -rp | -upr <arg>

The purpose of this tool is to enable reconfiguration of security aspects
of the Acquisition Unit such as encryption keys, and proxy configuration,
etc. For more information about this tool, please check the Cloud Insights
Documentation.

-ap,--add-proxy <arg>       add a proxy server.  Arguments: ip=ip
                             port=port user=user password=password
                             domain=domain
                             (Note: Always use double quote(") or single
                             quote(') around user and password to escape
                             any special characters, e.g., <, >, ~, `, ^,
                             !
                             For example: user="test" password="t'!<@1"
                             Note: domain is required if the proxy auth
                             scheme is NTLM.)
-h,--help
-rp,--remove-proxy          remove proxy server
-upr,--update-proxy <arg>   update a proxy.  Arguments: ip=ip port=port
                             user=user password=password domain=domain
                             (Note: Always use double quote(") or single
                             quote(') around user and password to escape
                             any special characters, e.g., <, >, ~, `, ^,
                             !
                             For example: user="test" password="t'!<@1"
                             Note: domain is required if the proxy auth
                             scheme is NTLM.)
----
Por ejemplo, para eliminar el proxy, ejecute este comando:

 [root@ci-eng-linau bin]# ./securityadmin -pr -rp
Debe reiniciar la unidad de adquisición después de ejecutar el comando.

Para actualizar un proxy, el comando es

 ./securityadmin -pr -upr <arg>